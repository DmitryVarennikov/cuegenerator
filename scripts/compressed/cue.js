function Cue(a,d,e,c,b){this.separators=[" - "," \u2013 "," \u2012 "," \u2014 "," \u2015 "];this.perfomer=$("#"+a).val();this.title=$("#"+d).val();this.filename=$("#"+e).val();this.tracklist=this.getTracklist(c);this.regions_list=this.getRegionsList(b)}
Cue.prototype.getTracklist=function(a){var d=[];a=$("#"+a).val().split("\n");i=0;for(track=1;i<a.length;i++,track++){var e=$.trim(a[i]);if(e.length){var c="00:00:00",b=this.split(e);e=b.shift();var h=e.match(/^(\d{2}\.)?\[?(\d{2,3}:\d{2})\]?.*$/i);if(null!=h&&h.length>1){c=h[2];c+=":00"}pattern=/^(\d{2}\.)?\[?(\d{2,3}:\d{2})?\]?\s?\d{0,2}(\s|\. )?(.*)$/i;e=e.replace(pattern,"$4");b=b.length>0?b.join(" - "):"";e=e.replace(/"/g,"");b=b.replace(/"/g,"");d[track]={track:track<10?"0"+track:track,perfomer:e,
title:b,time:c}}else track--}return d};Cue.prototype.split=function(a){a=-1!==a.search(this.separators[0])?a.split(this.separators[0]):-1!==a.search(this.separators[1])?a.split(this.separators[1]):-1!==a.search(this.separators[2])?a.split(this.separators[2]):-1!==a.search(this.separators[3])?a.split(this.separators[3]):-1!==a.search(this.separators[4])?a.split(this.separators[4]):[a];return $.map(a,function(d){return $.trim(d)})};
Cue.prototype.getRegionsList=function(a){var d=[];a=$("#"+a).val().split("\n");line=1;for(i=0;i<a.length;i++){var e=$.trim(a[i]),c=e.match(/(\d{2}:\d{2}:\d{2}[\.,:]\d{2})/i);if(null!=c){var b=c[0].split(":"),h=b.shift();c=b.shift();if(b.length>1)var f=b.shift(),g=b.shift();else{b=b.shift();switch(true){case -1!=b.indexOf("."):b=b.split(".");f=b.shift();g=b.shift();break;case -1!=b.indexOf(","):b=b.split(",");f=b.shift();g=b.shift();break}}c=parseInt(c,10)+parseInt(h,10)*60;d[line]=(c<10?"0"+c:c)+
":"+f+":"+g;line++}c=e.match(/(\d{1,5}).(\d{6})/i);if(null!=c){g=c[2];f=c[1];c=Math.floor(f/60);c=c>0?c:0;f=f%60;g=Math.floor(parseFloat("0."+g)*75);d[line]=(c<10?"0"+c:c)+":"+(f<10?"0"+f:f)+":"+(g<10?"0"+g:g);line++}}return d};
Cue.prototype.toString=function(){var a="";a+='PERFORMER "'+this.perfomer+'"\n';a+='TITLE "'+this.title+'"\n';a+='FILE "'+this.filename+'" MP3\n';for(i=1;i<this.tracklist.length;i++){var d=this.tracklist[i];a+="  TRACK "+d.track+" AUDIO\n";a+='    PERFORMER "'+d.perfomer+'"\n';a+='    TITLE "'+d.title+'"\n';a+="    INDEX 01 "+(this.regions_list[i]?this.regions_list[i]:d.time)+"\n"}return a};