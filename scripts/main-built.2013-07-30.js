define("layout",["jquery"],function(){var e=$(document).height()-20;$("#cue_fields textarea#tracklist").animate({height:e-350}),$("#cue").animate({height:e-173}),$("textarea#cue").one("click",function(){$(this).select()})}),define("cue/parser",[],function(){function e(e){return e.trim()}function t(e){return e.trim()}function n(e){return e.trim()}function a(e){var t=[],n=e.split("\n");for(var a=0,f=1;a<n.length;a++,f++){var l=n[a].trim();if(!l.length){f--;continue}var c=r(l),h=c.shift(),p=i(h),d=s(p.time),v=o(p.perfomer),m=u(c.length>0?c.join(" "):"");t.push({track:f,perfomer:v,title:m,time:d})}return t}function f(e){var t=[],n="",r=e.split("\n");for(var i=0;i<r.length;i++){var s=r[i].trim(),o=s.match(/(\d{2}:\d{2}:\d{2}[\.,:]\d{2})/i);if(null!=o){var n=o[0].split(":"),u=n.shift(),a=n.shift();if(n.length>1)var f=n.shift(),l=n.shift();else{var c=n.shift();switch(!0){case-1!=c.indexOf("."):c=c.split(".");var f=c.shift(),l=c.shift();break;case-1!=c.indexOf(","):c=c.split(",");var f=c.shift(),l=c.shift()}}a=parseInt(a,10)+parseInt(u,10)*60,n=(a<10?"0"+a:a)+":"+f+":"+l,t.push(n);continue}var o=s.match(/(\d{1,5}).(\d{6})/i);if(null!=o){var h=o[2],p=o[1],d=Math.floor(p/60),a=d>0?d:0,f=p%60,l=Math.floor(parseFloat("0."+h)*75);n=(a<10?"0"+a:a)+":"+(f<10?"0"+f:f)+":"+(l<10?"0"+l:l),t.push(n);continue}var o=s.match(/(\d{2}:\d{2}:\d{2})/i);if(null!=o){n=o[0].split(":");var a=parseInt(n[0],10),f=parseInt(n[1],10),l=parseInt(n[2],10);n=(a<10?"0"+a:a)+":"+(f<10?"0"+f:f)+":"+(l<10?"0"+l:l),t.push(n);continue}}return t}String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});var r=function(e){var t=[" - "," – "," ‒ "," — "," ― "];if(-1!==e.search(t[0]))var n=e.split(t[0]);else if(-1!==e.search(t[1]))var n=e.split(t[1]);else if(-1!==e.search(t[2]))var n=e.split(t[2]);else if(-1!==e.search(t[3]))var n=e.split(t[3]);else if(-1!==e.search(t[4]))var n=e.split(t[4]);else var n=[e];for(var r=0;r<n.length;r++)n[r]=n[r].trim();return n},i=function(e){var t="",n="",r=/^(?:\d{2}\.)?\[?((?:\d{1,2}:)?\d{2,3}:\d{2})\]?.*$/i,i=e.match(r);return i&&i[1]?(t=i[1].trim(),n=e.substring(e.indexOf(i[1])+i[1].length).trim()):n=e.trim(),{time:t,perfomer:n}},s=function(e){e=e.trim();var t=/^\d{1,2}:\d{2}:\d{2}$/,n=e.match(t);if(n){var r=e.split(":"),i=parseInt(r[0],10),s=parseInt(r[1],10),o=r[2];s=i*60+s,e=s+":"+o+":00"}else{var t=/^\d{2}:\d{2}$/,n=e.match(t);n?e+=":00":e="00:00:00"}return e},o=function(e){var t=/^(?:\]? )?(?:\d{2}\)?\.? )?(.*)$/i,n=e.match(t);return n&&n[1]&&(e=n[1]),e=e.replace(/"/g,""),e},u=function(e){return e=e.replace(/"/g,""),e};return{perfomer:e,title:t,filename:n,tracklist:a,regionsList:f,_splitTitlePerfomer:r,_splitTimePerfomer:i,_cleanPerfomer:o,_cleanTitle:u,_castTime:s}}),define("cue/formatter",[],function(){function e(e){return'PERFORMER "'+e+'"\n'}function t(e){return'TITLE "'+e+'"\n'}function n(e){return'FILE "'+e+'" MP3\n'}function r(e,t){var n="";for(var r=0;r<e.length;r++){var i=e[r];n+="  TRACK "+(i.track<10?"0"+i.track:i.track)+" AUDIO\n",n+='    PERFORMER "'+i.perfomer+'"\n',n+='    TITLE "'+i.title+'"\n',n+="    INDEX 01 "+(t[r]?t[r]:i.time)+"\n"}return n}return{perfomer:e,title:t,filename:n,tracklist:r}}),define("cue",["cue/parser","cue/formatter","jquery"],function(e,t){function n(n,r,i,s,o){var u="";return n=e.perfomer(n),n=t.perfomer(n),r=e.title(r),r=t.title(r),i=e.filename(i),i=t.filename(i),s=e.tracklist(s),o=e.regionsList(o),s=t.tracklist(s,o),u=n+r+i+s,u}$("#cue_fields input, #cue_fields textarea").keyup(function(e){var t=$("#perfomer").val(),r=$("#title").val(),i=$("#filename").val(),s=$("#tracklist").val(),o=$("#regions_list").val(),u=n(t,r,i,s,o);$("#cue").val(u)})}),requirejs.config({baseUrl:"scripts",paths:{jquery:["//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min","lib/jquery-1.9.1.min"]}}),require(["layout","cue"],function(){}),define("main",function(){});